<%- include('partical/header')%>
    <div class="container-fluid mb-3">
        <div class="row px-xl-5">
            <div class="col-lg-8">
                <div id="header-carousel" class="carousel slide carousel-fade mb-30 mb-lg-0" data-ride="carousel">
                    <ol class="carousel-indicators">
                        <li data-target="#header-carousel" data-slide-to="0" class="active"></li>
                        <li data-target="#header-carousel" data-slide-to="1"></li>
                        <li data-target="#header-carousel" data-slide-to="2"></li>
                    </ol>
                    <div class="carousel-inner">
                        <div class="carousel-item position-relative active" style="height: 430px;">
                            <img class="position-absolute w-100 h-100" src="/static/img/Ảnh Nền/Laptop.jpg" style="object-fit: cover;">
                            <div class="carousel-caption d-flex flex-column align-items-center justify-content-center">
                                <div class="p-3" style="max-width: 700px;">
                                    <h1 class="display-4 text-white mb-3 animate__animated animate__fadeInDown">Laptop</h1>
                                    <p class="mx-md-5 px-5 animate__animated animate__bounceIn"></p>
                                    <a class="btn btn-outline-light py-2 px-4 mt-3 animate__animated animate__fadeInUp" href="/product/cate/2">Mua
                                        Ngay</a>
                                </div>
                            </div>
                        </div>
                        <div class="carousel-item position-relative" style="height: 430px;">
                            <img class="position-absolute w-100 h-100" src="/static/img/Ảnh Nền/banphim.jpg" style="object-fit: cover;">
                            <div class="carousel-caption d-flex flex-column align-items-center justify-content-center">
                                <div class="p-3" style="max-width: 700px;">
                                    <h1 class="display-4 text-white mb-3 animate__animated animate__fadeInDown">Bàn phím</h1>
                                    <p class="mx-md-5 px-5 animate__animated animate__bounceIn"></p>
                                    <a class="btn btn-outline-light py-2 px-4 mt-3 animate__animated animate__fadeInUp" href="/product/cate/4">Mua
                                        Ngay</a>
                                </div>
                            </div>
                        </div>
                        <div class="carousel-item position-relative" style="height: 430px;">
                            <img class="position-absolute w-100 h-100" src="/static/img/Ảnh Nền/chuot.jpg" style="object-fit: cover;">
                            <div class="carousel-caption d-flex flex-column align-items-center justify-content-center">
                                <div class="p-3" style="max-width: 700px;">
                                    <h1 class="display-4 text-white mb-3 animate__animated animate__fadeInDown">Chuột máy tính</h1>
                                    <p class="mx-md-5 px-5 animate__animated animate__bounceIn"></p>
                                    <a class="btn btn-outline-light py-2 px-4 mt-3 animate__animated animate__fadeInUp" href="/product/cate/3">Mua
                                        Ngay</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="product-offer mb-30" style="height: 200px;">
                    <img class="img-fluid" src="/static/img/Ảnh Nền/spmoi.jpg" alt="">
                    <div class="offer-text">
                        <h6 class="text-white text-uppercase">Special</h6>
                        <h3 class="text-white mb-3">Sản Phẩm Mới</h3>
                        <a class="btn btn-outline-light py-2 px-4 mt-3 animate__animated animate__fadeInUp" href="/product/new">Mua Ngay</a>
                    </div>
                </div>
                <div class="product-offer mb-30" style="height: 200px;">
                    <img class="img-fluid" src="/static/img/Ảnh Nền/sale.jpg" alt="">
                    <div class="offer-text">
                        <h6 class="text-white text-uppercase">Sale Off 20%</h6>
                        <h3 class="text-white mb-3">Giảm Giá</h3>
                        <a class="btn btn-outline-light py-2 px-4 mt-3 animate__animated animate__fadeInUp" href="/product/sale">Mua Ngay</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--slide cac thu-->
    <!-- Carousel End -->
    <!-- Featured Start -->
    <div class="container-fluid pt-5">
        <div class="row px-xl-5 pb-3">
            <div class="col-lg-3 col-md-6 col-sm-12 pb-1">
                <div class="d-flex align-items-center bg-light mb-4" style="padding: 30px;">
                    <h1 class="fa fa-check text-primary m-0 mr-3" style="color: black !important;"></h1>
                    <h5 class="font-weight-semi-bold m-0">Sản Phẩm Chính Hãng</h5>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 col-sm-12 pb-1">
                <div class="d-flex align-items-center bg-light mb-4" style="padding: 30px;">
                    <h1 class="fa fa-shipping-fast text-primary m-0 mr-2" style="color: black !important;"></h1>
                    <h5 class="font-weight-semi-bold m-0">Miễn Phí Ship</h5>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 col-sm-12 pb-1">
                <div class="d-flex align-items-center bg-light mb-4" style="padding: 30px;">
                    <h1 class="fas fa-exchange-alt text-primary m-0 mr-3" style="color: black !important;"></h1>
                    <h5 class="font-weight-semi-bold m-0">Trả Hàng Trong 14 Ngày</h5>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 col-sm-12 pb-1">
                <div class="d-flex align-items-center bg-light mb-4" style="padding: 30px;">
                    <h1 class="fa fa-phone-volume text-primary m-0 mr-3" style="color: black !important;"></h1>
                    <h5 class="font-weight-semi-bold m-0">Hỗ Trợ 24/7</h5>
                </div>
            </div>
        </div>
    </div>
    <!-- Featured End -->
    <!-- Categories Start -->

    <div id="app" class="container-fluid pt-5">
        <h2 class="section-title position-relative text-uppercase mx-xl-5 mb-4">
            <span class="bg-secondary pr-3">Danh mục sản phẩm</span>
        </h2>
        <div class="row px-xl-5 pb-3">
            <p v-if="!categories.length">Đang tải...</p>
            <div class="row px-xl-5">
                <div class="col-lg-3 col-md-4 col-sm-6 pb-1" v-for="category in categories" :key="category._id">
                    <a class="text-decoration-none" :href="'/product/cate/' + category._id">
                        <div class="cat-item d-flex align-items-center mb-4">
                            <div class="overflow-hidden" style="width: 100px; height: 100px;">
                                <img class="img-fluid" :src="'/static/img/Product/' + category.img" alt="Category Image">
                            </div>
                            <div class="flex-fill pl-3">
                                <h6>{{ category.name }}</h6>
                            </div>
                            <div>
                                <!-- <small class="text-body"> @Model.Products.Count(p =>
									p.IdCate == item.IdCate) Products</small>  -->
                                <!-- <small class="text-body" >5 Products</small> -->
                            </div>
                        </div>
                    </a>
                </div>
            </div>
        </div>
        <!--category-->
        <!-- Categories End -->
        <!-- Products Start -->
        <div class="container-fluid pt-5 pb-3">
            <h2 class="section-title position-relative text-uppercase mx-xl-5 mb-4">
                <span class="bg-secondary pr-3"> SẢN PHẨM NỔI BẬT </span>
            </h2>
            <div class="row px-xl-5">
                <div class="col-lg-3 col-md-4 col-sm-6 pb-1" v-for="product in specialProducts" :key="product.id">
                    <div class="product-item bg-light mb-4">
                        <div class="product-img position-relative overflow-hidden">
                            <img style="height: 300px;" class="img-fluid w-100" :src="'/static/img/Product/' + product.img1" :alt="product.ten">
                            <div class="product-action">
                                <a class="btn btn-outline-dark btn-square" @click="addToCart(product._id, 1)">
                                    <i class="fa fa-shopping-cart"></i>
                                </a>
                                <!--  <a
                                    class="btn btn-outline-dark btn-square" href=""><i
                                    class="far fa-heart"></i></a> <a
                                    class="btn btn-outline-dark btn-square" href=""><i
                                    class="fa fa-sync-alt"></i></a>  -->
                                <a class="btn btn-outline-dark btn-square" :href="'/product/' + product._id">
                                    <i class="fa fa-search"></i>
                                </a>
                            </div>
                        </div>
                        <div class="text-center py-4">
                            <a style="padding: 10px" class="h6 text-decoration-none text-truncate" :href="'/product/' + product._id">
                                {{ product.ten }}
                            </a>
                            <div class="d-flex align-items-center justify-content-center mt-2">
                                <h5>$ {{ product.gia }}</h5>
                                <h6 class="text-muted ml-2">
                                    <!-- <del>$ {{ product.gia }}></del> -->
                                </h6>
                            </div>
                            <div class="d-flex align-items-center justify-content-center mb-1">
                                <small v-for="n in 5" :key="n" class="fa fa-star text-primary mr-1"></small>
                                <small>SL: <span>{{ product.soluong }}</span></small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--sp tieu bieu-->
        <!-- Products End -->
        <!-- Offer Start -->
        <div class="container-fluid pt-5 pb-3">
            <div class="row px-xl-5">
                <div class="col-md-6">
                    <div class="product-offer mb-30" style="height: 300px;">
                        <img class="img-fluid" src="/static/img/Ảnh Nền/spmoi.jpg" alt="">
                        <div class="offer-text">
                            <h6 class="text-white text-uppercase">Special</h6>
                            <h3 class="text-white mb-3">Sản Phẩm Mới</h3>
                            <a class="btn btn-outline-light py-2 px-4 mt-3 animate__animated animate__fadeInUp" href="/product/new">Mua Ngay</a>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="product-offer mb-30" style="height: 300px;">
                        <img class="img-fluid" src="/static/img/Ảnh Nền/sale.jpg" alt="">
                        <div class="offer-text">
                            <h6 class="text-white text-uppercase">Save 20%</h6>
                            <h3 class="text-white mb-3">Giảm Giá</h3>
                            <a class="btn btn-outline-light py-2 px-4 mt-3 animate__animated animate__fadeInUp" href="/product/sale">Mua
                                Ngay</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--slide nho-->
        <!-- Offer End -->
        <!-- Products Start -->
        <div class="container-fluid pt-5 pb-3">
            <h2 class="section-title position-relative text-uppercase mx-xl-5 mb-4">
                <span class="bg-secondary pr-3"> SẢN PHẨM MỚI </span>
            </h2>
            <div class="row px-xl-5">
                <div class="col-lg-3 col-md-4 col-sm-6 pb-1" v-for="product in newProducts" :key="product.id">
                    <div class="product-item bg-light mb-4">
                        <div class="product-img position-relative overflow-hidden">
                            <img style="height: 300px;" class="img-fluid w-100" :src="'/static/img/Product/' + product.img1" :alt="product.ten">
                            <div class="product-action">
                                <a class="btn btn-outline-dark btn-square" @click="addToCart(product._id, 1)">
                                    <i class="fa fa-shopping-cart"></i>
                                </a>
                                <!--  <a
										class="btn btn-outline-dark btn-square" href=""><i
										class="far fa-heart"></i></a> <a
										class="btn btn-outline-dark btn-square" href=""><i
										class="fa fa-sync-alt"></i></a>  -->
                                <a class="btn btn-outline-dark btn-square" :href="'/product/' + product._id">
                                    <i class="fa fa-search"></i>
                                </a>
                            </div>
                        </div>
                        <div class="text-center py-4">
                            <a style="padding: 10px" class="h6 text-decoration-none text-truncate" :href="'/product/' + product._id">
                                {{ product.ten }}
                            </a>
                            <div class="d-flex align-items-center justify-content-center mt-2">
                                <h5>$ {{ product.gia }}</h5>

                                <h6 class="text-muted ml-2">

                                    <!-- <del>$ {{ product.gia }}></del> -->

                                </h6>
                            </div>
                            <div class="d-flex align-items-center justify-content-center mb-1">
                                <small v-for="n in 5" :key="n" class="fa fa-star text-primary mr-1"></small>
                                <small>SL: <span>{{ product.soluong }}</span></small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--RECENT PRODUCTS-->
        <!-- Products End -->
        <!-- Vendor Start -->
        <div class="container-fluid py-5">
            <h2 class="section-title position-relative text-uppercase mx-xl-5 mb-4">
                <span class="bg-secondary pr-3">Nhà Phân Phối</span>
            </h2>
            <div class="row px-xl-5">
                <div class="col">
                    <div class="owl-carousel vendor-carousel" v-if="producers.length > 0" ref="vendorCarousel">
                        <div class="bg-light p-4" v-for="producer in producers" :key="producer.id">
                            <img style="height:100px" :src="'/static/img/Producer/' + producer.img" :alt="'Producer ' + producer.img">
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
    <script src="/static/js/addCartMixin.js"></script>
    <script>
        new Vue({
            el: "#app",
            mixins: [addCartMixin],
            data: {
                specialProducts: [],
                newProducts: [],
                categories: [],
                producers: []
            },
            methods: {
                async loadData() {
                    try {
                        const [specialProductRes, newProductRes, categoryRes, producerRes] = await Promise.all([
                            fetch("/api/product/random"),
                            fetch("/api/product/new"),
                            fetch("/api/category"),
                            fetch("/api/producer")
                        ]);

                        const [specialProductData, newProductData, categoryData, producerData] = await Promise.all([
                            specialProductRes.json(),
                            newProductRes.json(),
                            categoryRes.json(),
                            producerRes.json()
                        ]);

                        this.specialProducts = specialProductData;
                        this.newProducts = newProductData;
                        this.categories = categoryData;
                        this.producers = producerData;

                        this.$nextTick(() => {
                            this.initCarousel();
                        });
                    } catch (err) {
                        console.error("Lỗi khi tải dữ liệu:", err);
                    }
                },
                initCarousel() {
                    const $carousel = $(this.$refs.vendorCarousel);
                    if ($carousel.hasClass('owl-loaded')) {
                        $carousel.owlCarousel('destroy');
                    }
                    $carousel.owlCarousel({
                        loop: this.producers.length > 1,
                        margin: 29,
                        nav: false,
                        autoplay: true,
                        smartSpeed: 1000,
                        responsive: {
                            0: { items: 2 },
                            576: { items: 3 },
                            768: { items: 4 },
                            992: { items: 5 },
                            1200: { items: 6 }
                        }
                    });
                },
            },
            mounted() {
                this.loadData();
            }
        });
    </script>
    <%- include('partical/footer')%>